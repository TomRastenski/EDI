<!DOCTYPE html>
<html>
    <head>
        <title>edi project</title>
        <link rel="stylesheet" href="main.css">
        <link rel="preconnect" href="https://fonts.googleapis.com/%22%3E">
<link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300&display=swap" rel="stylesheet">
<script src="script.js"></script> 
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>

    </head>


    <body>
        <div class="navigation">
            <div class="container">
                <ul class="menu" >
                    <li>
                        <a href="topthree.html">top three</a>
                    </li>
                    <li>
                        <a href="index.html"> start </a>
                    </li>
                    <li>
                        <a href="creators.html"> creators </a>
                    </li>
                    
                </ul>
            </div>
        </div>


    <div class="hero" style="margin: auto;">

        <div class="container">
            <h1 class="main-tittle">PLAYER DATABASE</h1>
            <h2 class="subtittle">here you can find a list of 100 players from all over the world sorted from best to worst</h2>
        </div>
    </div>
<center>
<button class="button" onclick="loadJSON1(function(response) {
    var data = JSON.parse(response);
    tableBuilder(data);
    buildChart(data);
  });">Data 1</button> 

<button class="button" onclick="loadJSON2(function(response) {
    var data = JSON.parse(response);
    tableBuilder(data);
    buildChart(data);
  });">Data 2</button> 

<button class="button" onclick="loadJSON3(function(response) {
    var data = JSON.parse(response);
    tableBuilder(data);
    buildChart(data);
  });">Data 3</button> 
   
    <p id="demo"> </p>
    
    <script>
  
        function buildChart(data) {
          var genderCounts = {};
          data.forEach(function(row) {
            var gender = row.gender;
            if (!genderCounts[gender]) {
              genderCounts[gender] = 0;
            }
            genderCounts[gender]++;
          });
          
          var labels = [];
          var chartData = [];
          for (var gender in genderCounts) {
            labels.push(gender);
            chartData.push(genderCounts[gender]);
          }
          
          new Chart(document.getElementById("pieChart"), {
            type: 'pie',
            data: {
              labels: labels,
              datasets: [{
                label: 'Most Common Gender',
                data: chartData,
                backgroundColor: [
                  'rgba(255, 99, 132, 0.2)',
                  'rgba(54, 162, 235, 0.2)',
                  'rgba(255, 206, 86, 0.2)',
                  'rgba(75, 192, 192, 0.2)',
                  'rgba(153, 102, 255, 0.2)',
                  'rgba(25, 159, 64, 0.2)',
                  'rgba(20, 10, 13, 0.2)'
                
                ],
                
                borderWidth: 1
              }]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false
            }
          });
        }
        
      
      </script>

<hr></hr>    
    
<th><button class="button" onclick="loadJSON1(function(response) {
    var data = JSON.parse(response);
    buildChart(data);
  });">Data 1 pie chart</button></th>
  <th><button class="button" onclick="loadJSON2(function(response) {
    var data = JSON.parse(response);
    buildChart(data);
  });">Data 2 pie chart</button></th>
  <th><button class="button" onclick="loadJSON3(function(response) {
    var data = JSON.parse(response);
    buildChart(data);
  });">Data 3 pie chart</button></th>


  <script>
  
  
    function loadJSON1(callback) {   
    var xobj = new XMLHttpRequest();
    xobj.overrideMimeType("application/json");
    xobj.open('GET', 'data1.json', true); 
    xobj.onreadystatechange = function () {
      if (xobj.readyState == 4 && xobj.status == "200") {
        callback(xobj.responseText);
      }
    };
    xobj.send(null);  
  }
  function loadJSON2(callback) {   
    var xobj = new XMLHttpRequest();
    xobj.overrideMimeType("application/json");
    xobj.open('GET', 'data2.json', true); 
    xobj.onreadystatechange = function () {
      if (xobj.readyState == 4 && xobj.status == "200") {
        callback(xobj.responseText);
      }
    };
    xobj.send(null);  
  }
  function loadJSON3(callback) {   
    var xobj = new XMLHttpRequest();
    xobj.overrideMimeType("application/json");
    xobj.open('GET', 'data3.json', true); 
    xobj.onreadystatechange = function () {
      if (xobj.readyState == 4 && xobj.status == "200") {
        callback(xobj.responseText);
      }
    };
    xobj.send(null);  
  }
  </script>
  </center>         
   
    <body>
      <canvas id="pieChart" width="100" height="100"></canvas>
    </body>


    </div>
    </body>
    <footer>
            <div class="foot"></div>
      </footer>
      
</html>

    


